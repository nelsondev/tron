jQuery(document).ready(function () { fadeInOnScroll(); smoothScrollLink(); searchBar(); burgerClick(); moreDetailsClick(); videoClick() }); function debugLog(a) { jsonData.debug && console.log(a) } function fadeInOnScroll() { $(window).scroll(function () { lazyLoadBackground() }) } function smoothScrollLink() { $('a[href^="#"]').on("click", function (a) { a.preventDefault(); var b = this.hash; a = $(b).offset().top - 60; $("html, body").animate({ scrollTop: a }, 0, "swing", function () { window.location.hash = b }) }) }
function lazyLoadBackground() { $(".lazy-background").each(function () { var a = $(this); if (isScrolledIntoView(a)) { var b = a.attr("video-poster-src"); a.css("background", "url(" + b + ")"); a.css("opacity", "1") } else b = a.attr("video-poster-src"), a.css("background", "url(" + b + ")"), a.css("opacity", "0") }) } function shuffleDivs() { $(".shuffle").each(function () { for (var a = $(this), b = a.children(); b.length;)a.append(b.splice(Math.floor(Math.random() * b.length), 1)[0]) }) }
function isScrolledIntoView(a) { a = $(a); var b = $(window), c = b.scrollTop() - 200; b = c + b.height() + 400; var d = a.offset().top; return d + a.height() <= b && d >= c } function searchBar() { focussearch(); searchpage() }
function focussearch() { $("input").on({ focus: function () { $("#movies-menu-selector").hide(); $("#tv-menu-selector").hide(); $("#request-menu-selector").hide(); $("#search-icon").hide(); $("#close-icon").show() }, focusout: function () { $("#movies-menu-selector").show(); $("#tv-menu-selector").show(); $("#request-menu-selector").show(); $("#search-icon").show(); $("#close-icon").hide() } }) }
function searchpage() { $("#search-bar").on("keydown", function () { var a = $(this).val().toLowerCase(); $(".scroll_box *:not(h3)").filter(function () { $(this).toggle(-1 < $(this).text().toLowerCase().indexOf(a)); $("#empty").html('<h3>cant find anything for "' + a + '".</h3>') }); updategenreheader(); lazyLoadBackground(); 0 == $(".scroll_box *:not(h3)").children(":visible").length ? $("#empty").show() : $("#empty").hide() }) }
function updategenreheader() { $(".genre_box").each(function () { 50 > $(this).height() ? $(this).find("h3").hide() : $(this).find("h3").show() }) } function burgerClick() { $(".burger_container").on("click", function () { toggleburgermenu($(this)) }); $("#movies-menu-selector").on("click", function () { togglemoviesheader($(this)) }); $("#tv-menu-selector").on("click", function () { toggletvheader($(this)) }) }
function toggleburgermenu(a) { a = $(".menu_extended_container"); a.is(":hidden") ? (a.show(), $("body").css("margin-right", 400), $(".burger_slice").css("background", "#000")) : (a.hide(), $(".burger_slice").css("background", "#fff"), $("body").css("margin-right", 0)) } function togglemoviesheader(a) { hideallheaders(); $("#movies-header").is(":hidden") ? $("#movies-header").show() : $("#movies-header").hide() }
function toggletvheader(a) { hideallheaders(); $("#tv-header").is(":hidden") ? $("#tv-header").show() : $("#tv-header").hide() } function moreDetailsClick() { $("#more-details-button").on("click", function () { togglemoredetails(); lazyLoadBackground() }) }
function togglemoredetails() { var a = $("#movies-header-content"), b = $("#movies-header"); a.is(":hidden") ? (a.show(), $("#more-details-button").html('less details<i class="material-icons">keyboard_arrow_up</i>'), $("#more-details-button").css("background", "#FA7268"), b.css("height", "100vh")) : (a.hide(), $("#more-details-button").html('more details<i class="material-icons">keyboard_arrow_down</i>'), $("#more-details-button").css("background", "#000"), b.css("height", "auto")) }
function videoClick() { $("#movie_content").on("click", ".video_box", function () { loadvideo($(this)); addrecentlyplayed($(this)); window.scrollTo(0, 0) }); $("#play-random-button").on("click", function () { loadvideo($(this)); addrecentlyplayed($(this)) }) } function loadvideo(a) { var b = videojs("my-video"); b.pause(); b.src(a.attr("video-src")); b.load(); b.play(); hideallheaders(); $("#player-header").show() }
function hideallheaders() { $("#movies-header").hide(); $("#tv-header").hide(); $("#player-header").hide(); $(".menu_extended_container").hide(); $(".burger_slice").css("background", "#fff"); $("body").css("margin-right", 0); videojs("my-video").pause() } function addrecentlyplayed(a) { a = a.find(".videoname").html(); a = localStorage.getItem("recently-played") + "," + a; a = a.replace("null,", ""); localStorage.setItem("recently-played", $.unique(a.split(","))); debugLog(localStorage.getItem("recently-played")) }
function loadrecentlyplayed() { $("#watched") };